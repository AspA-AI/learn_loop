# Standardized Evaluation Report Format

All evaluation reports generated by the InsightAgent follow this exact JSON structure to ensure consistency across all sessions.

## Base Format

```json
{
  "summary": "A warm, 2-3 sentence summary of what the child explored and learned.",
  "achievements": [
    "Specific achievement 1",
    "Specific achievement 2",
    "Specific achievement 3"
  ],
  "challenges": [
    "Challenge or confusion area 1",
    "Challenge or confusion area 2"
  ],
  "recommended_next_steps": [
    "Next step 1",
    "Next step 2",
    "Next step 3"
  ],
  "key_insights": [
    "Insight about learning style",
    "Insight about engagement"
  ],
  "concept_mastery_level": "developing"
}
```

## Field Specifications

### `summary` (string, required)
- **Type**: String
- **Length**: 2-3 sentences
- **Tone**: Warm and encouraging
- **Content**: What the child explored and learned during the session

### `achievements` (array, required)
- **Type**: Array of strings
- **Count**: 2-5 items
- **Content**: Specific 'Aha!' moments or concepts the child understood
- **Example**: ["Successfully explained photosynthesis using the cooking analogy", "Identified that plants need sunlight to make food"]

### `challenges` (array, required)
- **Type**: Array of strings
- **Count**: 0-3 items (can be empty)
- **Content**: Concepts the child found difficult or areas of confusion
- **Example**: ["Struggled with the concept of chlorophyll", "Confused about the difference between respiration and photosynthesis"]

### `recommended_next_steps` (array, required)
- **Type**: Array of strings
- **Count**: 2-4 items
- **Content**: Actionable steps for parents (offline activities, conversation starters, etc.)
- **Example**: ["Take a walk in the garden and point out different plants", "Ask your child to explain photosynthesis to a family member"]

### `key_insights` (array, required)
- **Type**: Array of strings
- **Count**: 1-3 items
- **Content**: Observations about the child's learning approach, engagement style, or cognitive patterns
- **Example**: ["Learns best through analogies and real-world examples", "Shows high engagement when concepts relate to personal interests"]

### `concept_mastery_level` (string, required)
- **Type**: String (enum)
- **Values**: `"beginner"` | `"developing"` | `"proficient"` | `"mastered"`
- **Description**: Overall mastery level of the concept based on the session

## Enriched Format (After Session End)

When a session ends, the base format is enriched with session metadata:

```json
{
  // ... all base fields above ...
  "session_id": "uuid-string",
  "concept": "Mathematical Division",
  "mastery_percent": 85,
  "total_interactions": 12,
  "understood_count": 8,
  "partial_count": 3,
  "confused_count": 1,
  "ended_at": "2026-01-15T12:30:00.000Z"
}
```

## Validation

The `InsightAgent._validate_and_normalize_report()` method ensures:
1. All required fields are present
2. Arrays are always arrays (never null or missing)
3. `concept_mastery_level` is one of the valid enum values
4. Missing or invalid fields are replaced with defaults

## Usage

This format is used when:
- A session ends (`POST /sessions/{session_id}/end`)
- Reports are stored in `sessions.evaluation_report` (JSONB column)
- Reports are retrieved for parent insights dashboard

All reports follow this structure, ensuring consistent data for analytics and parent dashboards.

